var d=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},fe=class{static fromArray(t,r){let n=r||new ze;for(let i=t.length-1;i>=0;--i)n=new pe(t[i],n);return n}[Symbol.iterator](){return new vn(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof ze}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function _(e,t){return new pe(e,t)}function p(e,t){return fe.fromArray(e,t)}var vn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof ze)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},ze=class extends fe{},pe=class extends fe{constructor(t,r){super(),this.head=t,this.tail=r}},gt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Ht(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Ht(this.rawBuffer,this.bitOffset,i),o=Ht(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Ht(this.rawBuffer,this.bitOffset,r),s=Ht(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(us("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(us("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Ht(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var os={};function us(e,t){os[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),os[e]=!0)}var kt=class e extends d{static isResult(t){return t instanceof e}},g=class extends kt{constructor(t){super(),this[0]=t}isOk(){return!0}},k=class extends kt{constructor(t){super(),this[0]=t}isOk(){return!1}};function N(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!ls(n)||!ls(i)||!Ju(n,i)||Fu(n,i)||Ru(n,i)||Gu(n,i)||Hu(n,i)||Vu(n,i)||Yu(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,u]=Wu(n);for(let a of l(n))r.push(u(n,a),u(i,a))}return!0}function Wu(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Fu(e,t){return e instanceof Date&&(e>t||e<t)}function Ru(e,t){return!(e instanceof gt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Gu(e,t){return Array.isArray(e)&&e.length!==t.length}function Hu(e,t){return e instanceof Map&&e.size!==t.size}function Vu(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Yu(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ls(e){return typeof e=="object"&&e!==null}function Ju(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function jr(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var b=class extends d{constructor(t){super(),this[0]=t}},j=class extends d{};function Or(e,t){if(e instanceof b){let r=e[0];return new g(r)}else return new k(t)}function as(e,t){return e instanceof b?e[0]:t}var Y=class extends d{},R=class extends d{},ee=class extends d{};function ol(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function Jt(e){return ol(e,"")}function Lr(e){let r=$s(e);return xs(r)}function ks(e){return!!e.isOk()}function jt(e,t){if(e.isOk()){let r=e[0];return new g(t(r))}else{let r=e[0];return new k(r)}}function pt(e,t){if(e.isOk()){let r=e[0];return new g(r)}else{let r=e[0];return new k(t(r))}}function Ot(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new k(r)}}function Je(e,t){return Ot(e,t)}function vs(e){return e.isOk(),e[0]}function On(e,t){if(e.isOk()){let r=e[0];return new g(r)}else return new k(t)}var Ls=new WeakMap,Sn=new DataView(new ArrayBuffer(8)),En=0;function An(e){let t=Ls.get(e);if(t!==void 0)return t;let r=En++;return En===2147483647&&(En=0),Ls.set(e,r),r}function zn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Bn(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Es(e){Sn.setFloat64(0,e);let t=Sn.getInt32(0),r=Sn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function _l(e){return Bn(e.toString())}function ml(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return An(e);if(e instanceof Date)return Es(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+je(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+je(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+zn(je(n),je(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+zn(je(o),Bn(s))|0}}return r}function je(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Es(e);case"string":return Bn(e);case"bigint":return _l(e);case"object":return ml(e);case"symbol":return An(e);case"function":return An(e);default:return 0}}var De=5,Cn=Math.pow(2,De),hl=Cn-1,$l=Cn/2,xl=Cn/4,le=0,Ie=1,xe=2,_t=3,qn={type:xe,bitmap:0,array:[]};function Kt(e,t){return e>>>t&hl}function Er(e,t){return 1<<Kt(e,t)}function wl(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Nn(e,t){return wl(e&t-1)}function Oe(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function yl(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Tn(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function As(e,t,r,n,i,s){let o=je(t);if(o===n)return{type:_t,hash:o,array:[{type:le,k:t,v:r},{type:le,k:i,v:s}]};let l={val:!1};return Qt(Mn(qn,e,o,t,r,l),e,n,i,s,l)}function Qt(e,t,r,n,i,s){switch(e.type){case Ie:return bl(e,t,r,n,i,s);case xe:return Mn(e,t,r,n,i,s);case _t:return gl(e,t,r,n,i,s)}}function bl(e,t,r,n,i,s){let o=Kt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:Ie,size:e.size+1,array:Oe(e.array,o,{type:le,k:n,v:i})};if(l.type===le)return N(n,l.k)?i===l.v?e:{type:Ie,size:e.size,array:Oe(e.array,o,{type:le,k:n,v:i})}:(s.val=!0,{type:Ie,size:e.size,array:Oe(e.array,o,As(t+De,l.k,l.v,r,n,i))});let u=Qt(l,t+De,r,n,i,s);return u===l?e:{type:Ie,size:e.size,array:Oe(e.array,o,u)}}function Mn(e,t,r,n,i,s){let o=Er(r,t),l=Nn(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[l];if(u.type!==le){let f=Qt(u,t+De,r,n,i,s);return f===u?e:{type:xe,bitmap:e.bitmap,array:Oe(e.array,l,f)}}let a=u.k;return N(n,a)?i===u.v?e:{type:xe,bitmap:e.bitmap,array:Oe(e.array,l,{type:le,k:n,v:i})}:(s.val=!0,{type:xe,bitmap:e.bitmap,array:Oe(e.array,l,As(t+De,a,u.v,r,n,i))})}else{let u=e.array.length;if(u>=$l){let a=new Array(32),f=Kt(r,t);a[f]=Mn(qn,t+De,r,n,i,s);let c=0,h=e.bitmap;for(let w=0;w<32;w++){if((h&1)!==0){let $=e.array[c++];a[w]=$}h=h>>>1}return{type:Ie,size:u+1,array:a}}else{let a=yl(e.array,l,{type:le,k:n,v:i});return s.val=!0,{type:xe,bitmap:e.bitmap|o,array:a}}}}function gl(e,t,r,n,i,s){if(r===e.hash){let o=In(e,n);if(o!==-1)return e.array[o].v===i?e:{type:_t,hash:r,array:Oe(e.array,o,{type:le,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:_t,hash:r,array:Oe(e.array,l,{type:le,k:n,v:i})}}return Qt({type:xe,bitmap:Er(e.hash,t),array:[e]},t,r,n,i,s)}function In(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(N(t,e.array[n].k))return n;return-1}function Sr(e,t,r,n){switch(e.type){case Ie:return kl(e,t,r,n);case xe:return vl(e,t,r,n);case _t:return jl(e,n)}}function kl(e,t,r,n){let i=Kt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==le)return Sr(s,t+De,r,n);if(N(n,s.k))return s}}function vl(e,t,r,n){let i=Er(r,t);if((e.bitmap&i)===0)return;let s=Nn(e.bitmap,i),o=e.array[s];if(o.type!==le)return Sr(o,t+De,r,n);if(N(n,o.k))return o}function jl(e,t){let r=In(e,t);if(!(r<0))return e.array[r]}function Dn(e,t,r,n){switch(e.type){case Ie:return Ol(e,t,r,n);case xe:return Ll(e,t,r,n);case _t:return Sl(e,n)}}function Ol(e,t,r,n){let i=Kt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===le){if(!N(s.k,n))return e}else if(o=Dn(s,t+De,r,n),o===s)return e;if(o===void 0){if(e.size<=xl){let l=e.array,u=new Array(e.size-1),a=0,f=0,c=0;for(;a<i;){let h=l[a];h!==void 0&&(u[f]=h,c|=1<<a,++f),++a}for(++a;a<l.length;){let h=l[a];h!==void 0&&(u[f]=h,c|=1<<a,++f),++a}return{type:xe,bitmap:c,array:u}}return{type:Ie,size:e.size-1,array:Oe(e.array,i,o)}}return{type:Ie,size:e.size,array:Oe(e.array,i,o)}}function Ll(e,t,r,n){let i=Er(r,t);if((e.bitmap&i)===0)return e;let s=Nn(e.bitmap,i),o=e.array[s];if(o.type!==le){let l=Dn(o,t+De,r,n);return l===o?e:l!==void 0?{type:xe,bitmap:e.bitmap,array:Oe(e.array,s,l)}:e.bitmap===i?void 0:{type:xe,bitmap:e.bitmap^i,array:Tn(e.array,s)}}return N(n,o.k)?e.bitmap===i?void 0:{type:xe,bitmap:e.bitmap^i,array:Tn(e.array,s)}:e}function Sl(e,t){let r=In(e,t);if(r<0)return e;if(e.array.length!==1)return{type:_t,hash:e.hash,array:Tn(e.array,r)}}function zs(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===le){t(s.v,s.k);continue}zs(s,t)}}}var Pe=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Sr(this.root,0,je(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?qn:this.root,s=Qt(i,0,je(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Dn(this.root,0,je(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Sr(this.root,0,je(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){zs(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+zn(je(r),je(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!N(t.get(n,!r),r))throw Ss}),!0}catch(r){if(r===Ss)return!1;throw r}}},Ss=Symbol();var El=void 0,Ts={};function ge(e){return e.toString()}function jn(e){if(e==="")return 0;let t=Al(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}var Bs;function Al(e){if(globalThis.Intl&&Intl.Segmenter)return Bs||=new Intl.Segmenter,Bs.segment(e)[Symbol.iterator]()}function mt(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ke(e){return e.toLowerCase()}function Z(e,t,r){return e.slice(t,t+r)}function Xt(e,t){return e.startsWith(t)}var qs=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),zl=new RegExp(`^[${qs}]*`),Tl=new RegExp(`[${qs}]*$`);function $s(e){return e.replace(zl,"")}function xs(e){return e.replace(Tl,"")}function Zt(){return Pe.new()}function er(e,t){let r=e.get(t,Ts);return r===Ts?new k(El):new g(r)}function Ns(e,t,r){return r.set(e,t)}function rt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof kt)return"Result";if(e instanceof fe)return"List";if(e instanceof gt)return"BitArray";if(e instanceof Pe)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function tr(e,t,r){return Ns(t,r,e)}var G=class extends d{},Ue=class extends d{};function Cl(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function Ar(e){return Cl(e,0)}function rr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function P(e){return rr(e,p([]))}function Is(e){if(e.hasLength(0))return new k(void 0);{let t=e.head;return new g(t)}}function ql(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return P(s);{let o=n.head;e=n.tail,t=i,r=_(i(o),s)}}}function _e(e,t){return ql(e,t,p([]))}function Nl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function Te(e,t){return Nl(P(e),t)}function We(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Ds(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new k(void 0);{let i=r.head,s=r.tail;if(n(i))return new g(i);e=s,t=n}}}function Ml(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new k(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let l=o[0];return new g(l)}else e=s,t=n}}}function Il(e,t,r,n,i,s){for(;;){let o=e,l=t,u=r,a=n,f=i,c=s,h=_(f,u);if(o.hasLength(0))return a instanceof G?_(P(h),c):_(h,c);{let w=o.head,$=o.tail,v=l(f,w);if(v instanceof ee&&a instanceof Ue)e=$,t=l,r=h,n=a,i=w,s=c;else if(v instanceof Y&&a instanceof G)e=$,t=l,r=h,n=a,i=w,s=c;else if(v instanceof R&&a instanceof G)e=$,t=l,r=h,n=a,i=w,s=c;else if(v instanceof ee&&a instanceof G){let m;a instanceof G?m=_(P(h),c):m=_(h,c);let O=m;if($.hasLength(0))return _(p([w]),O);{let y=$.head,L=$.tail,S,x=l(w,y);x instanceof Y?S=new G:x instanceof R?S=new G:S=new Ue;let E=S;e=L,t=l,r=p([w]),n=E,i=y,s=O}}else if(v instanceof Y&&a instanceof Ue){let m;a instanceof G?m=_(P(h),c):m=_(h,c);let O=m;if($.hasLength(0))return _(p([w]),O);{let y=$.head,L=$.tail,S,x=l(w,y);x instanceof Y?S=new G:x instanceof R?S=new G:S=new Ue;let E=S;e=L,t=l,r=p([w]),n=E,i=y,s=O}}else{let m;a instanceof G?m=_(P(h),c):m=_(h,c);let O=m;if($.hasLength(0))return _(p([w]),O);{let y=$.head,L=$.tail,S,x=l(w,y);x instanceof Y?S=new G:x instanceof R?S=new G:S=new Ue;let E=S;e=L,t=l,r=p([w]),n=E,i=y,s=O}}}}}function Dl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return rr(s,l);if(s.hasLength(0))return rr(i,l);{let u=i.head,a=i.tail,f=s.head,c=s.tail,h=o(u,f);h instanceof Y?(e=a,t=s,r=o,n=_(u,l)):h instanceof ee?(e=i,t=c,r=o,n=_(f,l)):(e=i,t=c,r=o,n=_(f,l))}}}function Pl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return P(s);if(n.hasLength(1)){let o=n.head;return P(_(P(o),s))}else{let o=n.head,l=n.tail.head,u=n.tail.tail,a=Dl(o,l,i,p([]));e=u,t=i,r=_(a,s)}}}function Ul(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return rr(s,l);if(s.hasLength(0))return rr(i,l);{let u=i.head,a=i.tail,f=s.head,c=s.tail,h=o(u,f);h instanceof Y?(e=i,t=c,r=o,n=_(f,l)):h instanceof ee?(e=a,t=s,r=o,n=_(u,l)):(e=a,t=s,r=o,n=_(u,l))}}}function Wl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return P(s);if(n.hasLength(1)){let o=n.head;return P(_(P(o),s))}else{let o=n.head,l=n.tail.head,u=n.tail.tail,a=Ul(o,l,i,p([]));e=u,t=i,r=_(a,s)}}}function Fl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return p([]);if(n.hasLength(1)&&i instanceof G)return n.head;if(n.hasLength(1)&&i instanceof Ue){let o=n.head;return P(o)}else i instanceof G?(e=Pl(n,s,p([])),t=new Ue,r=s):(e=Wl(n,s,p([])),t=new G,r=s)}}function Ps(e,t){if(e.hasLength(0))return p([]);if(e.hasLength(1)){let r=e.head;return p([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof Y?s=new G:o instanceof R?s=new G:s=new Ue;let l=s,u=Il(i,t,p([r]),l,n,p([]));return Fl(u,new G,t)}}function Pn(e,t){return Ml(e,r=>{let n=r[0],i=r[1];return N(n,t)?new g(i):new k(void 0)})}function Un(e,t){if(e instanceof Pe||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new g(new j):new g(new b(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof fe){let n=0;for(let i of e){if(n===t)return new g(new b(i));n++}return new k("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new g(new b(e[t])):new g(new j):new k(r?"Indexable":"Dict")}function Us(e,t,r,n,i){if(!(e instanceof fe||Array.isArray(e))){let o=new Xe("List",rt(e),i);return[i,fe.fromArray([o])]}let s=[];for(let o of e){let l=t(o),[u,a]=l;if(a instanceof pe){let[f,c]=r(l,n.toString());return[i,c]}s.push(u),n++}return[fe.fromArray(s),i]}function Ws(e){return Number.isInteger(e)?new g(e):new k(0)}function Fs(e){return typeof e=="string"?new g(e):new k("")}var Xe=class extends d{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},Fe=class extends d{constructor(t){super(),this.function=t}};function nt(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new g(n):new k(i)}function Be(e){return new Fe(t=>[e,p([])])}function zr(e,t){return new Fe(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Rl(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,l=s.tail,u=o.function(n),a=u;if(u[1].hasLength(0))return a;e=n,t=i,r=l}}}function Gs(e,t){return new Fe(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:Rl(r,i,t)})}function Hs(e,t,r){let n=r(e);return n.isOk()?[n[0],p([])]:[n[0],p([new Xe(t,rt(e),p([]))])]}function Gl(e){return Hs(e,"Int",Ws)}var Vs=new Fe(Gl);function Hl(e){return Hs(e,"String",Fs)}var te=new Fe(Hl);function it(e){return new Fe(t=>Us(t,e.function,(r,n)=>nr(r,p([n])),0,p([])))}function nr(e,t){let r=Gs(te,p([zr(Vs,ge)])),n=_e(t,s=>{let o=s,l=nt(o,r);return l.isOk()?l[0]:"<"+rt(o)+">"}),i=_e(e[1],s=>{let o=s;return new Xe(o.expected,o.found,Te(n,s.path))});return[e[0],i]}function Vl(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,a=i;if(s.hasLength(0)){let f=l(u);return nr(f,P(o))}else{let f=s.head,c=s.tail,h=Un(u,f);if(h.isOk()&&h[0]instanceof b){let w=h[0][0];e=c,t=_(f,o),r=l,n=w,i=a}else{if(h.isOk()&&h[0]instanceof j)return a(u,_(f,o));{let w=h[0],m=[l(u)[0],p([new Xe(w,rt(u),p([]))])];return nr(m,P(o))}}}}}function Wn(e,t,r){return new Fe(n=>{let i=Vl(e,p([]),t.function,n,(f,c)=>{let $=[t.function(f)[0],p([new Xe("Field","Nothing",p([]))])];return nr($,P(c))}),s=i[0],o=i[1],l=r(s).function(n),u=l[0],a=l[1];return[u,Te(o,a)]})}function ae(e,t,r){return Wn(p([e]),t,r)}function Fn(e,t,r,n){return new Fe(i=>{let s,o=Un(i,e);if(o.isOk()&&o[0]instanceof b){let v=o[0][0];s=r.function(v)}else if(o.isOk()&&o[0]instanceof j)s=[t,p([])];else{let v=o[0];s=[t,p([new Xe(v,rt(i),p([]))])]}let l;l=nr(s,p([e]));let a=l,f=a[0],c=a[1],h=n(f).function(i),w=h[0],$=h[1];return[w,Te(c,$)]})}function Rn(e,t,r){return e?t:r()}function me(e){return e}function Js(e){try{let t=JSON.parse(e);return new g(t)}catch(t){return new k(Jl(t,e))}}function Jl(e,t){return Xl(e)?new Cr:Kl(e,t)}function Xl(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Kl(e,t){let r=[Ql,Zl,ta,ea];for(let n of r){let i=n(e,t);if(i)return i}return new st("",0)}function Ql(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Br(r[1]);return new st(n,-1)}function Zl(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Br(r[1]),i=Number(r[2]);return new st(n,i)}function ea(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=ra(i,s,t),l=Br(t[o]);return new st(l,o)}function ta(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Br(r[2]);return new st(n,0)}function Br(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function ra(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Cr=class extends d{},st=class extends d{constructor(t){super(),this[0]=t}};var Gn=class extends d{constructor(t){super(),this[0]=t}};function ia(e,t){return Je(Js(e),r=>{let n=nt(r,t);return pt(n,i=>new Gn(i))})}function qr(e,t){return ia(e,t)}var Nr=class extends d{constructor(t){super(),this.dict=t}};function Ks(){return new Nr(Zt())}function Vn(e,t){let r=e.dict,n=er(r,t);return ks(n)}var oa=void 0;function Qs(e,t){return new Nr(tr(e.dict,t,oa))}var la=Pe.new();function Mr(){return la}var aa=Ks();function ir(){return aa}var Ce=globalThis?.document,Ir="http://www.w3.org/1999/xhtml",Dr=1,Pr=3,sr=11,Zs=!!globalThis.HTMLElement?.prototype?.moveBefore;var T=p([]),Ur=new j;var ca=new ee,fa=new Y,pa=new R;function Wr(e,t){return e.name===t.name?pa:e.name<t.name?fa:ca}var Le=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},or=class extends d{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},re=class extends d{constructor(t,r,n,i,s,o,l,u){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=l,this.limit=u}},St=class extends d{constructor(t){super(),this.kind=t}},ur=class extends d{constructor(t,r){super(),this.kind=t,this.delay=r}},lr=class extends d{constructor(t,r){super(),this.kind=t,this.delay=r}};function uo(e,t){if(e instanceof St&&t instanceof St)return!0;if(e instanceof ur&&t instanceof ur&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else if(e instanceof lr&&t instanceof lr&&e.delay===t.delay){let r=e.delay,n=t.delay;return!0}else return!1}function ha(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(2)&&r.head instanceof Le&&r.head.name==="class"&&r.tail.head instanceof Le&&r.tail.head.name==="class"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,l=r.tail.tail,u=s+" "+o,a=new Le(i,"class",u);e=_(a,l),t=n}else if(r.atLeastLength(2)&&r.head instanceof Le&&r.head.name==="style"&&r.tail.head instanceof Le&&r.tail.head.name==="style"){let i=r.head.kind,s=r.head.value,o=r.tail.head.value,l=r.tail.tail,u=s+";"+o,a=new Le(i,"style",u);e=_(a,l),t=n}else{let i=r.head;e=r.tail,t=_(i,n)}}}function lo(e){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=Ps(e,(n,i)=>Wr(i,n));return ha(r,T)}}var Kn=0;function ao(e,t){return new Le(Kn,e,t)}var co=1;var Qn=2;function fo(e,t,r,n,i,s,o){return new re(Qn,e,t,r,n,i,s,o)}var Zn=1;var ei=2;function ot(e,t){return ao(e,t)}function M(e){return ot("class",e)}function po(e){return ot("id",e)}function _o(e){return ot("src",e)}function mo(e){return ot("placeholder",e)}function ho(e){return ot("value",e)}var Rr=class extends d{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var $o=new Rr(p([]),p([]),p([]));function Se(){return $o}function Et(e){let t=n=>{let i=n.dispatch;return e(i)},r=$o;return new Rr(p([t]),r.before_paint,r.after_paint)}function we(){return null}function At(e,t){let r=e?.get(t);return r!=null?new g(r):new k(void 0)}function fr(e,t,r){return e??=new Map,e.set(t,r),e}function ti(e,t){return e?.delete(t),e}var Hr=class extends d{},Vr=class extends d{constructor(t,r){super(),this.key=t,this.parent=r}},ri=class extends d{constructor(t,r){super(),this.index=t,this.parent=r}};function wa(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(Xt(r,i))return!0;e=r,t=s}}}function ut(e,t,r){return r===""?new ri(t,e):new Vr(r,e)}var ni=new Hr,ii=`
`,si="	";function xo(e,t){for(;;){let r=e,n=t;if(r instanceof Hr){if(n.hasLength(0))return"";{let i=n.tail;return Jt(i)}}else if(r instanceof Vr){let i=r.key;e=r.parent,t=_(si,_(i,n))}else{let i=r.index;e=r.parent,t=_(ii,_(ge(i),n))}}}function ya(e){return xo(e,p([]))}function wo(e,t){return t.hasLength(0)?!1:wa(ya(e),t)}var oi="\f";function ui(e,t){return xo(e,p([oi,t]))}var ce=class extends d{constructor(t,r,n,i,s,o){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s,this.children_count=o}},Ee=class extends d{constructor(t,r,n,i,s,o,l,u,a,f){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=l,this.keyed_children=u,this.self_closing=a,this.void=f}},Re=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},qe=class extends d{constructor(t,r,n,i,s,o,l){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=l}};function ka(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function ye(e){return e instanceof ce?1+e.children_count:1}var li=0;function bo(e,t,r,n,i){return new ce(li,e,t,r,n,i)}var ai=1;function ci(e,t,r,n,i,s,o,l,u){return new Ee(ai,e,t,r,n,lo(i),s,o,l,u||ka(n,r))}var fi=2;function pi(e,t,r){return new Re(fi,e,t,r)}var go=3;function ko(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,a=i;if(o.hasLength(0))return[P(u),a];if(o.atLeastLength(1)&&o.head instanceof ce&&o.head.key===""){let f=o.head,c=o.tail,h=s+"::"+ge(l),w=ko(h,f.children,0,T,we()),$=w[0],v=w[1],m,O=f;m=new ce(O.kind,O.key,O.mapper,$,v,O.children_count);let L=_(m,u),S=l+1;e=s,t=c,r=S,n=L,i=a}else if(o.atLeastLength(1)&&o.head.key!==""){let f=o.head,c=o.tail,h=s+"::"+f.key,w=di(h,f),$=_(w,u),v=fr(a,h,w),m=l+1;e=s,t=c,r=m,n=$,i=v}else{let f=o.head,c=o.tail,h=_(f,u),w=l+1;e=s,t=c,r=w,n=h,i=a}}}function di(e,t){if(t instanceof Ee){let r=t;return new Ee(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.children,r.keyed_children,r.self_closing,r.void)}else if(t instanceof Re){let r=t;return new Re(r.kind,e,r.mapper,r.content)}else if(t instanceof qe){let r=t;return new qe(r.kind,e,r.mapper,r.namespace,r.tag,r.attributes,r.inner_html)}else{let r=t.children,n=ko(e,r,0,T,we()),i=n[0],s=n[1],o=t;return new ce(o.kind,e,o.mapper,i,s,o.children_count)}}var $t=class extends d{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},_i=class extends d{constructor(t,r){super(),this.kind=t,this.content=r}},mi=class extends d{constructor(t,r){super(),this.kind=t,this.inner_html=r}},hi=class extends d{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},$i=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.before=n,this.count=i}},xi=class extends d{constructor(t,r,n){super(),this.kind=t,this.key=r,this.count=n}},wi=class extends d{constructor(t,r,n,i){super(),this.kind=t,this.from=r,this.count=n,this.with=i}},yi=class extends d{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}},bi=class extends d{constructor(t,r,n){super(),this.kind=t,this.from=r,this.count=n}};function gi(e,t,r,n){return new $t(e,t,r,n)}var ki=0;function vo(e){return new _i(ki,e)}var vi=1;function jo(e){return new mi(vi,e)}var ji=2;function Oi(e,t){return new hi(ji,e,t)}var Yr=3;function Oo(e,t,r){return new $i(Yr,e,t,r)}var Li=4;function Lo(e,t){return new xi(Li,e,t)}var Jr=5;function Si(e,t,r){return new wi(Jr,e,t,r)}var Xr=6;function Ei(e,t){return new yi(Xr,e,t)}var Kr=7;function So(e,t){return new bi(Kr,e,t)}var tn=class extends d{constructor(t,r){super(),this.patch=t,this.events=r}},Ai=class extends d{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function ja(e,t,r,n){return r==="input"&&t===""?Zr(e,n):r==="select"&&t===""?Zr(e,n):r==="textarea"&&t===""?Zr(e,n):!1}function Ao(e,t,r,n,i,s,o,l){for(;;){let u=e,a=t,f=r,c=n,h=i,w=s,$=o,v=l;if(h.hasLength(0)&&w.hasLength(0))return new Ai($,v,c);if(h.atLeastLength(1)&&h.head instanceof re&&w.hasLength(0)){let m=h.head,O=h.head.name,y=h.tail,L=_(m,v),S=Qr(c,a,O);e=u,t=a,r=f,n=S,i=y,s=w,o=$,l=L}else if(h.atLeastLength(1)&&w.hasLength(0)){let m=h.head,O=h.tail,y=_(m,v);e=u,t=a,r=f,n=c,i=O,s=w,o=$,l=y}else if(h.hasLength(0)&&w.atLeastLength(1)&&w.head instanceof re){let m=w.head,O=w.head.name,y=w.head.handler,L=w.tail,S=_(m,$),x=dr(c,f,a,O,y);e=u,t=a,r=f,n=x,i=h,s=L,o=S,l=v}else if(h.hasLength(0)&&w.atLeastLength(1)){let m=w.head,O=w.tail,y=_(m,$);e=u,t=a,r=f,n=c,i=h,s=O,o=y,l=v}else{let m=h.head,O=h.tail,y=w.head,L=w.tail,S=Wr(m,y);if(m instanceof Le&&S instanceof R&&y instanceof Le){let x,E=y.name;E==="value"||E==="checked"||E==="selected"?x=u||m.value!==y.value:x=m.value!==y.value;let z=x,C;z?C=_(y,$):C=$;let I=C;e=u,t=a,r=f,n=c,i=O,s=L,o=I,l=v}else if(m instanceof or&&S instanceof R&&y instanceof or){let x,E=y.name;E==="scrollLeft"||E==="scrollRight"?x=!0:E==="value"?x=u||!N(m.value,y.value):E==="checked"?x=u||!N(m.value,y.value):E==="selected"?x=u||!N(m.value,y.value):x=!N(m.value,y.value);let z=x,C;z?C=_(y,$):C=$;let I=C;e=u,t=a,r=f,n=c,i=O,s=L,o=I,l=v}else if(m instanceof re&&S instanceof R&&y instanceof re){let x=y.name,E=y.handler,z=m.prevent_default!==y.prevent_default||m.stop_propagation!==y.stop_propagation||m.immediate!==y.immediate||!uo(m.limit,y.limit),C;z?C=_(y,$):C=$;let I=C,W=dr(c,f,a,x,E);e=u,t=a,r=f,n=W,i=O,s=L,o=I,l=v}else if(m instanceof re&&S instanceof R){let x=m.name,E=_(y,$),z=_(m,v),C=Qr(c,a,x);e=u,t=a,r=f,n=C,i=O,s=L,o=E,l=z}else if(S instanceof R&&y instanceof re){let x=y.name,E=y.handler,z=_(y,$),C=_(m,v),I=dr(c,f,a,x,E);e=u,t=a,r=f,n=I,i=O,s=L,o=z,l=C}else if(S instanceof R){let x=_(y,$),E=_(m,v);e=u,t=a,r=f,n=c,i=O,s=L,o=x,l=E}else if(S instanceof ee&&y instanceof re){let x=y.name,E=y.handler,z=_(y,$),C=dr(c,f,a,x,E);e=u,t=a,r=f,n=C,i=h,s=L,o=z,l=v}else if(S instanceof ee){let x=_(y,$);e=u,t=a,r=f,n=c,i=h,s=L,o=x,l=v}else if(m instanceof re&&S instanceof Y){let x=m.name,E=_(m,v),z=Qr(c,a,x);e=u,t=a,r=f,n=z,i=O,s=w,o=$,l=E}else{let x=_(m,v);e=u,t=a,r=f,n=c,i=O,s=w,o=$,l=x}}}}function zi(e,t,r,n,i,s,o,l,u,a,f,c,h,w){for(;;){let $=e,v=t,m=r,O=n,y=i,L=s,S=o,x=l,E=u,z=a,C=f,I=c,W=h,se=w;if($.hasLength(0)&&m.hasLength(0))return new tn(new $t(E,S,C,I),se);if($.atLeastLength(1)&&m.hasLength(0)){let q=$.head,H=$.tail,A;q.key===""||!Vn(y,q.key)?A=S+ye(q):A=S;let V=A,K=_r(se,z,x,q);e=H,t=v,r=m,n=O,i=y,s=L,o=V,l=x,u=E,a=z,f=C,c=I,h=W,w=K}else if($.hasLength(0)&&m.atLeastLength(1)){let q=To(se,W,z,x,m),H=Ei(m,x-L),A=_(H,C);return new tn(new $t(E,S,A,I),q)}else if($.atLeastLength(1)&&m.atLeastLength(1)&&$.head.key!==m.head.key){let q=$.head,H=$.tail,A=m.head,oe=m.tail,V=At(v,A.key),K=At(O,q.key),$e=Vn(y,q.key);if(K.isOk()&&V.isOk()&&$e)e=H,t=v,r=m,n=O,i=y,s=L-ye(q),o=S,l=x,u=E,a=z,f=C,c=I,h=W,w=se;else if(K.isOk()&&V.isOk()){let F=V[0],D=ye(A),J=x-L,Q=Oo(A.key,J,D),ue=_(Q,C),Ae=Qs(y,A.key),Ne=L+D;e=_(F,$),t=v,r=m,n=O,i=Ae,s=Ne,o=S,l=x,u=E,a=z,f=ue,c=I,h=W,w=se}else if(!K.isOk()&&V.isOk()){let F=ye(q),D=L-F,J=_r(se,z,x,q),Q=Lo(q.key,F),ue=_(Q,C);e=H,t=v,r=m,n=O,i=y,s=D,o=S,l=x,u=E,a=z,f=ue,c=I,h=W,w=J}else if(K.isOk()&&!V.isOk()){let F=x-L,D=ye(A),J=en(se,W,z,x,A),Q=Ei(p([A]),F),ue=_(Q,C);e=$,t=v,r=oe,n=O,i=y,s=L+D,o=S,l=x+D,u=E,a=z,f=ue,c=I,h=W,w=J}else{let F=ye(q),D=ye(A),J=Si(x-L,F,A),Q,Ae=_r(se,z,x,q);Q=en(Ae,W,z,x,A);let Ne=Q;e=H,t=v,r=oe,n=O,i=y,s=L-F+D,o=S,l=x+D,u=E,a=z,f=_(J,C),c=I,h=W,w=Ne}}else if($.atLeastLength(1)&&$.head instanceof ce&&m.atLeastLength(1)&&m.head instanceof ce){let q=$.head,H=$.tail,A=m.head,oe=m.tail,V=x+1,K=q.children_count,$e=A.children_count,F=lt(W,A.mapper),D=zi(q.children,q.keyed_children,A.children,A.keyed_children,ir(),L,0,V,-1,z,T,I,F,se),J;if(D.patch.removed>0){let Ae=V+$e-L,Ne=So(Ae,D.patch.removed);J=Te(D.patch.changes,_(Ne,C))}else J=Te(D.patch.changes,C);let ue=J;e=H,t=v,r=oe,n=O,i=y,s=L+$e-K,o=S,l=V+$e,u=E,a=z,f=ue,c=D.patch.children,h=W,w=D.events}else if($.atLeastLength(1)&&$.head instanceof Ee&&m.atLeastLength(1)&&m.head instanceof Ee&&$.head.namespace===m.head.namespace&&$.head.tag===m.head.tag){let q=$.head,H=$.tail,A=m.head,oe=m.tail,V=lt(W,A.mapper),K=ut(z,x,A.key),$e=ja(se,A.namespace,A.tag,K),F=Ao($e,K,V,se,q.attributes,A.attributes,T,T),D=F.added,J=F.removed,Q=F.events,ue;D.hasLength(0)&&J.hasLength(0)?ue=T:ue=p([Oi(D,J)]);let Ae=ue,Ne=zi(q.children,q.keyed_children,A.children,A.keyed_children,ir(),0,0,0,x,K,Ae,T,V,Q),bt,et=Ne.patch;et instanceof $t&&et.removed===0&&et.changes.hasLength(0)&&et.children.hasLength(0)?bt=I:bt=_(Ne.patch,I);let kn=bt;e=H,t=v,r=oe,n=O,i=y,s=L,o=S,l=x+1,u=E,a=z,f=C,c=kn,h=W,w=Ne.events}else if($.atLeastLength(1)&&$.head instanceof Re&&m.atLeastLength(1)&&m.head instanceof Re&&$.head.content===m.head.content){let q=$.head,H=$.tail,A=m.head,oe=m.tail;e=H,t=v,r=oe,n=O,i=y,s=L,o=S,l=x+1,u=E,a=z,f=C,c=I,h=W,w=se}else if($.atLeastLength(1)&&$.head instanceof Re&&m.atLeastLength(1)&&m.head instanceof Re){let q=$.tail,H=m.head,A=m.tail,oe=gi(x,0,p([vo(H.content)]),T);e=q,t=v,r=A,n=O,i=y,s=L,o=S,l=x+1,u=E,a=z,f=C,c=_(oe,I),h=W,w=se}else if($.atLeastLength(1)&&$.head instanceof qe&&m.atLeastLength(1)&&m.head instanceof qe){let q=$.head,H=$.tail,A=m.head,oe=m.tail,V=lt(W,A.mapper),K=ut(z,x,A.key),$e=Ao(!1,K,V,se,q.attributes,A.attributes,T,T),F=$e.added,D=$e.removed,J=$e.events,Q;F.hasLength(0)&&D.hasLength(0)?Q=T:Q=p([Oi(F,D)]);let ue=Q,Ae;q.inner_html===A.inner_html?Ae=ue:Ae=_(jo(A.inner_html),ue);let bt=Ae,et;bt.hasLength(0)?et=I:et=_(gi(x,0,bt,p([])),I);let kn=et;e=H,t=v,r=oe,n=O,i=y,s=L,o=S,l=x+1,u=E,a=z,f=C,c=kn,h=W,w=J}else{let q=$.head,H=$.tail,A=m.head,oe=m.tail,V=ye(q),K=ye(A),$e=Si(x-L,V,A),F,J=_r(se,z,x,q);F=en(J,W,z,x,A);let Q=F;e=H,t=v,r=oe,n=O,i=y,s=L-V+K,o=S,l=x+K,u=E,a=z,f=_($e,C),c=I,h=W,w=Q}}}function Ti(e,t,r){return zi(p([t]),we(),p([r]),we(),ir(),0,0,0,0,ni,T,T,me,zo(e))}var nn=class{offset=0;#e=null;#s=()=>{};#l=!1;constructor(t,r,{useServerEvents:n=!1}={}){this.#e=t,this.#s=r,this.#l=n}mount(t){rn(this.#e,this.#u(t))}#r=[];push(t){let r=this.offset;r&&(Qe(t.changes,n=>{switch(n.kind){case Xr:case Yr:n.before=(n.before|0)+r;break;case Kr:case Jr:n.from=(n.from|0)+r;break}}),Qe(t.children,n=>{n.index=(n.index|0)+r})),this.#r.push({node:this.#e,patch:t}),this.#o()}#o(){let t=this;for(;t.#r.length;){let{node:r,patch:n}=t.#r.pop();Qe(n.changes,i=>{switch(i.kind){case Xr:t.#a(r,i.children,i.before);break;case Yr:t.#p(r,i.key,i.before,i.count);break;case Li:t.#d(r,i.key,i.count);break;case Kr:t.#t(r,i.from,i.count);break;case Jr:t.#c(r,i.from,i.count,i.with);break;case ki:t.#i(r,i.content);break;case vi:t.#_(r,i.inner_html);break;case ji:t.#f(r,i.added,i.removed);break}}),n.removed&&t.#t(r,r.childNodes.length-n.removed,n.removed),Qe(n.children,i=>{t.#r.push({node:hr(r,i.index),patch:i})})}}#a(t,r,n){let i=qo();Qe(r,s=>{let o=this.#u(s);Ci(t,o),rn(i,o)}),Bi(t,i,hr(t,n))}#p(t,r,n,i){let s=No(t,r),o=hr(t,n);for(let l=0;l<i&&s!==null;++l){let u=s.nextSibling;Zs?t.moveBefore(s,o):Bi(t,s,o),s=u}}#d(t,r,n){this.#n(t,No(t,r),n)}#t(t,r,n){this.#n(t,hr(t,r),n)}#n(t,r,n){for(;n-- >0&&r!==null;){let i=r.nextSibling,s=r[X].key;s&&t[X].keyedChildren.delete(s);for(let[o,{timeout:l}]of r[X].debouncers)clearTimeout(l);t.removeChild(r),r=i}}#c(t,r,n,i){this.#t(t,r,n);let s=this.#u(i);Ci(t,s),Bi(t,s,hr(t,r))}#i(t,r){t.data=r??""}#_(t,r){t.innerHTML=r??""}#f(t,r,n){Qe(n,i=>{let s=i.name;t[X].handlers.has(s)?(t.removeEventListener(s,Mo),t[X].handlers.delete(s),t[X].throttles.has(s)&&t[X].throttles.delete(s),t[X].debouncers.has(s)&&(clearTimeout(t[X].debouncers.get(s).timeout),t[X].debouncers.delete(s))):(t.removeAttribute(s),Do[s]?.removed?.(t,s))}),Qe(r,i=>{this.#h(t,i)})}#u(t){switch(t.kind){case ai:{let r=Bo(t);return this.#m(r,t),this.#a(r,t.children,0),r}case fi:{let r=Co(t.content);return Ze(r,t.key),r}case li:{let r=qo(),n=Co();return Ze(n,t.key),rn(r,n),Qe(t.children,i=>{rn(r,this.#u(i))}),r}case go:{let r=Bo(t);return this.#m(r,t),this.#_(r,t.inner_html),r}}}#m(t,{attributes:r}){Qe(r,n=>this.#h(t,n))}#h(t,r){let n=t[X];switch(r.kind){case Kn:{let i=r.name,s=r.value??"";s!==t.getAttribute(i)&&t.setAttribute(i,s),Do[i]?.added?.(t,s);break}case co:t[r.name]=r.value;break;case Qn:{n.handlers.has(r.name)||t.addEventListener(r.name,Mo,{passive:!r.prevent_default});let i=r.prevent_default,s=r.stop_propagation,o=r.immediate,l=Array.isArray(r.include)?r.include:[];if(r.limit?.kind===ei){let u=n.throttles.get(r.name)??{last:0,delay:r.limit.delay};n.throttles.set(r.name,u)}if(r.limit?.kind===Zn){let u=n.debouncers.get(r.name)??{timeout:null,delay:r.limit.delay};n.debouncers.set(r.name,u)}n.handlers.set(r.name,u=>{i&&u.preventDefault(),s&&u.stopPropagation();let a=u.type,f="",c=u.currentTarget;for(;c!==this.#e;){let w=c[X].key,$=c.parentNode;if(w)f=`${si}${w}${f}`;else{let v=$.childNodes,m=[].indexOf.call(v,c);$===this.#e&&(m-=this.offset),f=`${ii}${m}${f}`}c=$}f=f.slice(1);let h=this.#l?Oa(u,l):u;if(n.throttles.has(a)){let w=n.throttles.get(a),$=Date.now(),v=w.last||0;$>v+w.delay?(w.last=$,this.#s(h,f,a,o)):u.preventDefault()}else if(n.debouncers.has(a)){let w=n.debouncers.get(a);clearTimeout(w.timeout),w.timeout=setTimeout(()=>{this.#s(h,f,a,o)},w.delay)}else this.#s(h,f,a,o)});break}}}},Qe=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.tail;e=e.tail)t(e.head)},rn=(e,t)=>e.appendChild(t),Bi=(e,t,r)=>e.insertBefore(t,r??null),Bo=({key:e,tag:t,namespace:r})=>{let n=Ce.createElementNS(r||Ir,t);return Ze(n,e),n},Co=e=>Ce.createTextNode(e??""),qo=()=>Ce.createDocumentFragment(),hr=(e,t)=>e.childNodes[t|0],X=Symbol("lustre"),Ze=(e,t="")=>{switch(e.nodeType){case Dr:case sr:e[X]={key:t,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case Pr:e[X]={key:t,debouncers:new Map};break}},Ci=(e,t)=>{if(t.nodeType===sr){for(t=t.firstChild;t;t=t.nextSibling)Ci(e,t);return}let r=t[X].key;r&&e[X].keyedChildren.set(r,new WeakRef(t))},No=(e,t)=>e[X].keyedChildren.get(t).deref(),Mo=e=>{let r=e.currentTarget[X].handlers.get(e.type);e.type==="submit"&&(e.detail??={},e.detail.formData=[...new FormData(e.target).entries()]),r(e)},Oa=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,l=r;s<i.length;s++){if(s===i.length-1){l[i[s]]=o[i[s]];break}l=l[i[s]]??={},o=o[i[s]]}}return r},Io=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),La=e=>({added(t,r){t[e]=r}}),Do={checked:Io("checked"),selected:Io("selected"),value:La("value"),autofocus:{added(e){queueMicrotask(()=>e.focus?.())}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};var Wo=e=>{let t=Fo(e);if(t===null||t.children instanceof ze){let r=Po();return Ze(r),e.appendChild(r),Ge()}else{if(t.children instanceof pe&&t.children.tail instanceof ze)return t.children.head;{let r=Po();return Ze(r),e.insertBefore(r,e.firstChild),Ni(t.children)}}},Po=()=>Ce.createTextNode(""),Fo=e=>{switch(e.nodeType){case Dr:{let t=e.getAttribute("data-lustre-key");Ze(e,t),t&&e.removeAttribute("data-lustre-key");let r=e.localName,n=e.namespaceURI,i=!n||n===Ir;i&&Sa.includes(r)&&Ea(r,e);let s=Aa(e),o=Uo(e),l=i?be(r,s,o):qi(n,r,s,o);return t?di(t,l):l}case Pr:return Ze(e),sn(e.data);case sr:return Ze(e),e.childNodes.length>0?Ni(Uo(e)):null;default:return null}},Sa=["input","select","textarea"],Ea=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),Ce.activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},Uo=e=>{let t=T,r=e.lastChild;for(;r;){let n=Fo(r),i=r.previousSibling;n?t=new pe(n,t):e.removeChild(r),r=i}return t},Aa=e=>{let t=e.attributes.length,r=T;for(;t-- >0;)r=new pe(za(e.attributes[t]),r);return r},za=e=>{let t=e.localName,r=e.value;return ot(t,r)};var xr=()=>!!Ce;var Mi=(e,t)=>e===t;var $r=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#l=s,this.#a=new nn(this.root,(o,l,u)=>{let[a,f]=on(this.#o,l,u,o);this.#o=a,f.isOk()&&this.dispatch(f[0],!1)}),this.#r=Wo(this.root),this.#o=Ii(),this.#i=!0,this.#f(n)}root=null;set offset(t){this.#a.offset=t}dispatch(t,r=!1){if(this.#i||=r,this.#p)this.#d.push(t);else{let[n,i]=this.#l(this.#e,t);this.#e=n,this.#f(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}#e;#s;#l;#r;#o;#a;#p=!1;#d=[];#t=T;#n=T;#c=null;#i=!1;#_={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root};#f(t){for(this.#p=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#_);if(this.#t=Go(this.#t,t.before_paint),this.#n=Go(this.#n,t.after_paint),!this.#d.length)break;[this.#e,t]=this.#l(this.#e,this.#d.shift())}this.#p=!1,this.#i?(cancelAnimationFrame(this.#c),this.#u()):this.#c||(this.#c=requestAnimationFrame(()=>{this.#u()}))}#u(){this.#i=!1,this.#c=null;let t=this.#s(this.#e),{patch:r,events:n}=Ti(this.#o,this.#r,t);if(this.#o=n,this.#r=t,this.#a.push(r),this.#t instanceof pe){let i=Ro(this.#t);this.#t=T,queueMicrotask(()=>{this.#i=!0,this.#f(i)})}if(this.#n instanceof pe){let i=Ro(this.#n);this.#n=T,requestAnimationFrame(()=>{this.#i=!0,this.#f(i)})}}};function Ro(e){return{synchronous:e,after_paint:T,before_paint:T}}function Go(e,t){return e instanceof ze?t:t instanceof ze?e:Te(e,t)}var He=class extends d{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Ii(){return new He(we(),T,T)}function zo(e){return new He(e.handlers,e.next_dispatched_paths,T)}function Jo(e,t,r){return ti(e,ui(t,r))}function Qr(e,t,r){let n=Jo(e.handlers,t,r),i=e;return new He(n,i.dispatched_paths,i.next_dispatched_paths)}function Ho(e,t,r){return We(r,e,(n,i)=>{if(i instanceof re){let s=i.name;return Jo(n,t,s)}else return n})}function on(e,t,r,n){let i=_(t,e.next_dispatched_paths),s,o=e;s=new He(o.handlers,o.dispatched_paths,i);let l=s,u=At(l.handlers,t+oi+r);if(u.isOk()){let a=u[0];return[l,nt(n,a)]}else return[l,new k(p([]))]}function Zr(e,t){return wo(t,e.dispatched_paths)}function Xo(e,t,r,n,i){return fr(e,ui(r,n),zr(i,t))}function dr(e,t,r,n,i){let s=Xo(e.handlers,t,r,n,i),o=e;return new He(s,o.dispatched_paths,o.next_dispatched_paths)}function Vo(e,t,r,n){return We(n,e,(i,s)=>{if(s instanceof re){let o=s.name,l=s.handler;return Xo(i,t,r,o,l)}else return i})}function lt(e,t){let r=Mi(e,me),n=Mi(t,me);return n?e:r&&!n?t:i=>e(t(i))}function Yo(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(l.hasLength(0))return i;{let u=l.head,a=l.tail;e=Ko(i,s,o,u),t=s,r=o+ye(u),n=a}}}function Ko(e,t,r,n){if(n instanceof Ee){let i=n.attributes,s=n.children,o=ut(t,r,n.key),u=Ho(e,o,i);return Yo(u,o,0,s)}else if(n instanceof ce){let i=n.children;return Yo(e,t,r+1,i)}else if(n instanceof qe){let i=n.attributes,s=ut(t,r,n.key);return Ho(e,s,i)}else return e}function _r(e,t,r,n){let i=Ko(e.handlers,t,r,n),s=e;return new He(i,s.dispatched_paths,s.next_dispatched_paths)}function Di(e,t,r,n,i){for(;;){let s=e,o=t,l=r,u=n,a=i;if(a.hasLength(0))return s;{let f=a.head,c=a.tail;e=Qo(s,o,l,u,f),t=o,r=l,n=u+ye(f),i=c}}}function Qo(e,t,r,n,i){if(i instanceof Ee){let s=i.attributes,o=i.children,l=ut(r,n,i.key),u=lt(t,i.mapper),f=Vo(e,u,l,s);return Di(f,u,l,0,o)}else if(i instanceof ce){let s=i.children,o=lt(t,i.mapper),l=n+1;return Di(e,o,r,l,s)}else if(i instanceof qe){let s=i.attributes,o=ut(r,n,i.key),l=lt(t,i.mapper);return Vo(e,l,o,s)}else return e}function en(e,t,r,n,i){let s=Qo(e.handlers,t,r,n,i),o=e;return new He(s,o.dispatched_paths,o.next_dispatched_paths)}function To(e,t,r,n,i){let s=Di(e.handlers,t,r,n,i),o=e;return new He(s,o.dispatched_paths,o.next_dispatched_paths)}function be(e,t,r){return ci("",me,"",e,t,r,we(),!1,!1)}function qi(e,t,r,n){return ci("",me,e,t,r,n,we(),!1,!1)}function sn(e){return pi("",me,e)}function Ge(){return pi("",me,"")}function Ta(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head instanceof ce){let i=r.head.children_count;e=r.tail,t=n+i}else e=r.tail,t=n+1}}function Ni(e){return bo("",me,e,we(),Ta(e,0))}function he(e){return sn(e)}function eu(e,t){return be("h1",e,t)}function ne(e,t){return be("div",e,t)}function tu(e,t){return be("li",e,t)}function at(e,t){return be("p",e,t)}function ru(e,t){return be("ul",e,t)}function nu(e,t){return be("a",e,t)}function iu(e,t){return be("audio",e,t)}function su(e,t){return be("button",e,t)}function ou(e){return be("input",e,T)}var xt=class extends d{constructor(t){super(),this.message=t}},zt=class extends d{constructor(t,r){super(),this.name=t,this.data=r}};var wt=class extends d{};var Pi=class extends d{constructor(t,r,n,i,s,o,l,u){super(),this.open_shadow_root=t,this.adopt_styles=r,this.attributes=n,this.properties=i,this.is_form_associated=s,this.on_form_autofill=o,this.on_form_reset=l,this.on_form_restore=u}};function au(e){let t=new Pi(!1,!0,Mr(),Mr(),!1,Ur,Ur,Ur);return We(e,t,(r,n)=>n.apply(r))}var Ui=class e{static start({init:t,update:r,view:n},i,s){if(!xr())return new k(new Tt);let o=i instanceof HTMLElement?i:Ce.querySelector(i);return o?new g(new e(o,t(s),r,n)):new k(new un(i))}#e;constructor(t,[r,n],i,s){this.#e=new $r(t,[r,n],s,i)}send(t){switch(t.constructor){case xt:{this.dispatch(t.message,!1);break}case zt:{this.emit(t.name,t.data);break}case wt:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},cu=Ui.start;var Wi=class extends d{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var un=class extends d{constructor(t){super(),this.selector=t}},Tt=class extends d{};function fu(e,t,r){return new Wi(e,t,r,au(T))}function pu(e,t,r){return Rn(!xr(),new k(new Tt),()=>cu(e,t,r))}var B=class extends d{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function Pa(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ye(e,t){return new g((()=>{let r=t;return new B(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new b(e))})())}function Ua(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("#")&&l===0){let u=s.slice(1);return Ye(u,o)}else if(s.startsWith("#")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,c.host,c.port,c.path,new b(a),c.fragment),Ye(u,f)}else{if(s==="")return new g((()=>{let u=o;return new B(u.scheme,u.userinfo,u.host,u.port,u.path,new b(i),u.fragment)})());{let a=mt(s)[1];e=i,t=a,r=o,n=l+1}}}}function ct(e,t){return Ua(e,e,t,0)}function Wa(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("?")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,c.host,c.port,a,c.query,c.fragment),ct(u,f)}else if(s.startsWith("#")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,c.host,c.port,a,c.query,c.fragment),Ye(u,f)}else{if(s==="")return new g((()=>{let u=o;return new B(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let a=mt(s)[1];e=i,t=a,r=o,n=l+1}}}}function Ct(e,t){return Wa(e,e,t,0)}function Ve(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),l,u=i;return l=new B(u.scheme,u.userinfo,u.host,new b(s),u.path,u.query,u.fragment),ct(o,l)}else if(n.startsWith("#")){let o=n.slice(1),l,u=i;return l=new B(u.scheme,u.userinfo,u.host,new b(s),u.path,u.query,u.fragment),Ye(o,l)}else if(n.startsWith("/")){let o,l=i;return o=new B(l.scheme,l.userinfo,l.host,new b(s),l.path,l.query,l.fragment),Ct(n,o)}else return n===""?new g((()=>{let o=i;return new B(o.scheme,o.userinfo,o.host,new b(s),o.path,o.query,o.fragment)})()):new k(void 0)}}function ln(e,t){if(e.startsWith(":0")){let r=e.slice(2);return Ve(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return Ve(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return Ve(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return Ve(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return Ve(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return Ve(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return Ve(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return Ve(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return Ve(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return Ve(r,t,9)}else{if(e.startsWith(":"))return new k(void 0);if(e.startsWith("?")){let r=e.slice(1);return ct(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return Ye(r,t)}else return e.startsWith("/")?Ct(e,t):e===""?new g(t):new k(void 0)}}function _u(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s==="")return new g((()=>{let u=o;return new B(u.scheme,u.userinfo,new b(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=Z(i,0,l),a,f=o;return a=new B(f.scheme,f.userinfo,new b(u),f.port,f.path,f.query,f.fragment),ln(s,a)}else if(s.startsWith("/")){let u=Z(i,0,l),a,f=o;return a=new B(f.scheme,f.userinfo,new b(u),f.port,f.path,f.query,f.fragment),Ct(s,a)}else if(s.startsWith("?")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,new b(a),c.port,c.path,c.query,c.fragment),ct(u,f)}else if(s.startsWith("#")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,new b(a),c.port,c.path,c.query,c.fragment),Ye(u,f)}else{let a=mt(s)[1];e=i,t=a,r=o,n=l+1}}}function Fa(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s==="")return new g((()=>{let u=o;return new B(u.scheme,u.userinfo,new b(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&l===0){let u=s.slice(1);return ln(u,o)}else if(s.startsWith("]")){let u=s.slice(1),a=Z(i,0,l+1),f,c=o;return f=new B(c.scheme,c.userinfo,new b(a),c.port,c.path,c.query,c.fragment),ln(u,f)}else{if(s.startsWith("/")&&l===0)return Ct(s,o);if(s.startsWith("/")){let u=Z(i,0,l),a,f=o;return a=new B(f.scheme,f.userinfo,new b(u),f.port,f.path,f.query,f.fragment),Ct(s,a)}else if(s.startsWith("?")&&l===0){let u=s.slice(1);return ct(u,o)}else if(s.startsWith("?")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,new b(a),c.port,c.path,c.query,c.fragment),ct(u,f)}else if(s.startsWith("#")&&l===0){let u=s.slice(1);return Ye(u,o)}else if(s.startsWith("#")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,c.userinfo,new b(a),c.port,c.path,c.query,c.fragment),Ye(u,f)}else{let u=mt(s),a=u[0],f=u[1];if(Pa(a))e=i,t=f,r=o,n=l+1;else return _u(i,i,o,0)}}}}function Ra(e,t){return Fa(e,e,t,0)}function Ga(e,t){return _u(e,e,t,0)}function Bt(e,t){if(e.startsWith("["))return Ra(e,t);if(e.startsWith(":")){let r,n=t;return r=new B(n.scheme,n.userinfo,new b(""),n.port,n.path,n.query,n.fragment),ln(e,r)}else return e===""?new g((()=>{let r=t;return new B(r.scheme,r.userinfo,new b(""),r.port,r.path,r.query,r.fragment)})()):Ga(e,t)}function Ha(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("@")&&l===0){let u=s.slice(1);return Bt(u,o)}else if(s.startsWith("@")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(c.scheme,new b(a),c.host,c.port,c.path,c.query,c.fragment),Bt(u,f)}else{if(s==="")return Bt(i,o);if(s.startsWith("/"))return Bt(i,o);if(s.startsWith("?"))return Bt(i,o);if(s.startsWith("#"))return Bt(i,o);{let a=mt(s)[1];e=i,t=a,r=o,n=l+1}}}}function Va(e,t){return Ha(e,e,t,0)}function Fi(e,t){if(e==="//")return new g((()=>{let r=t;return new B(r.scheme,r.userinfo,new b(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return Va(r,t)}else return Ct(e,t)}function Ya(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(s.startsWith("/")&&l===0)return Fi(s,o);if(s.startsWith("/")){let u=Z(i,0,l),a,f=o;return a=new B(new b(ke(u)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Fi(s,a)}else if(s.startsWith("?")&&l===0){let u=s.slice(1);return ct(u,o)}else if(s.startsWith("?")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(new b(ke(a)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),ct(u,f)}else if(s.startsWith("#")&&l===0){let u=s.slice(1);return Ye(u,o)}else if(s.startsWith("#")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(new b(ke(a)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),Ye(u,f)}else{if(s.startsWith(":")&&l===0)return new k(void 0);if(s.startsWith(":")){let u=s.slice(1),a=Z(i,0,l),f,c=o;return f=new B(new b(ke(a)),c.userinfo,c.host,c.port,c.path,c.query,c.fragment),Fi(u,f)}else{if(s==="")return new g((()=>{let u=o;return new B(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let a=mt(s)[1];e=i,t=a,r=o,n=l+1}}}}}function mu(e){let t,r=e.fragment;if(r instanceof b){let x=r[0];t=p(["#",x])}else t=p([]);let n=t,i,s=e.query;if(s instanceof b){let x=s[0];i=_("?",_(x,n))}else i=n;let o=i,l=_(e.path,o),u,a=e.host,f=Xt(e.path,"/");if(a instanceof b&&!f&&a[0]!==""){let x=a[0];u=_("/",l)}else u=l;let c=u,h,w=e.host,$=e.port;if(w instanceof b&&$ instanceof b){let x=$[0];h=_(":",_(ge(x),c))}else h=c;let v=h,m,O=e.scheme,y=e.userinfo,L=e.host;if(O instanceof b&&y instanceof b&&L instanceof b){let x=O[0],E=y[0],z=L[0];m=_(x,_("://",_(E,_("@",_(z,v)))))}else if(O instanceof b&&y instanceof j&&L instanceof b){let x=O[0],E=L[0];m=_(x,_("://",_(E,v)))}else if(O instanceof b&&y instanceof b&&L instanceof j){let x=O[0];m=_(x,_(":",v))}else if(O instanceof b&&y instanceof j&&L instanceof j){let x=O[0];m=_(x,_(":",v))}else if(O instanceof j&&y instanceof j&&L instanceof b){let x=L[0];m=_("//",_(x,v))}else m=v;return Jt(m)}var Ja=new B(new j,new j,new j,new j,"",new j,new j);function Ri(e){return Ya(e,e,Ja,0)}var wr=class extends d{},an=class extends d{},Gi=class extends d{},Hi=class extends d{},Vi=class extends d{},Yi=class extends d{},Ji=class extends d{},Xi=class extends d{},Ki=class extends d{};var cn=class extends d{},yr=class extends d{};function $u(e){return e instanceof Ji?"CONNECT":e instanceof Vi?"DELETE":e instanceof wr?"GET":e instanceof Gi?"HEAD":e instanceof Xi?"OPTIONS":e instanceof Ki?"PATCH":e instanceof an?"POST":e instanceof Hi?"PUT":e instanceof Yi?"TRACE":e[0]}function xu(e){return e instanceof cn?"http":"https"}function wu(e){let t=ke(e);return t==="http"?new g(new cn):t==="https"?new g(new yr):new k(void 0)}var Zi=class extends d{constructor(t,r,n,i,s,o,l,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=l,this.query=u}};function bu(e){return new B(new b(xu(e.scheme)),new j,new b(e.host),e.port,e.path,e.query,new j)}function gu(e){return Je((()=>{let t=e.scheme,r=as(t,"");return wu(r)})(),t=>Je((()=>{let r=e.host;return Or(r,void 0)})(),r=>{let n=new Zi(new wr,p([]),"",t,r,e.port,e.path,e.query);return new g(n)}))}var fn=class extends d{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};function ku(e,t){return Pn(e.headers,ke(t))}var qt=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function pn(e){return Promise.resolve(qt.wrap(e))}function vu(e,t){return e.then(r=>t(qt.unwrap(r)))}function br(e,t){return e.then(r=>qt.wrap(t(qt.unwrap(r))))}function ju(e,t){return br(e,n=>(t(n),n))}function dn(e,t){return vu(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return pn(new k(i))}})}async function Lu(e){try{return new g(await fetch(e))}catch(t){return new k(new It(t.toString()))}}function Su(e){return new fn(e.status,fe.fromArray([...e.headers]),e)}function tc(e){let t=mu(bu(e)),r=$u(e.method).toUpperCase(),n={headers:rc(e.headers),method:r};return[t,n]}function Eu(e){let[t,r]=tc(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function rc(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function es(e){let t;try{t=await e.body.text()}catch{return new k(new Dt)}return new g(e.withFields({body:t}))}var It=class extends d{constructor(t){super(),this[0]=t}},Dt=class extends d{};function Au(e){let r=Eu(e),n=Lu(r);return dn(n,i=>pn(new g(Su(i))))}var ts=e=>{if(!globalThis.location)return new k(void 0);let t=new URL(e,globalThis.location.href),r=ic(t);return new g(r)},ic=e=>{let t=r=>r?new b(r):new j;return new B(t(e.protocol?.slice(0,-1)),new j,t(e.hostname),t(e.port&&Number(e.port)),e.pathname,t(e.search?.slice(1)),t(e.hash?.slice(1)))};var _n=class extends d{},mn=class extends d{constructor(t){super(),this[0]=t}},gr=class extends d{constructor(t){super(),this[0]=t}},rs=class extends d{constructor(t){super(),this[0]=t}},ns=class extends d{},hn=class extends d{constructor(t){super(),this[0]=t}},is=class extends d{constructor(t){super(),this.run=t}};function sc(e){return new is(t=>e(Ot(t,r=>{let n=r.status;if(n>=200&&n<300){let i=n;return new g(r)}else if(n>=400&&n<600){let i=n;return new k(new gr(r))}else return new k(new hn(r))})))}function oc(e){return sc(t=>e(Ot(t,r=>{let n=ku(r,"content-type");return n.isOk()&&n[0]==="application/json"?new g(r):n.isOk()&&n[0].startsWith("application/json;")?new g(r):new k(new hn(r))})))}function uc(e,t){return Et(r=>{let n=Au(e),i=dn(n,es),s=br(i,l=>pt(l,u=>u instanceof It?new ns:u instanceof Dt?new _n:new _n)),o=br(s,t.run);ju(o,r)})}function lc(e,t){return uc(e,t)}function zu(e,t){return Et(r=>{let n=new k(e),i=t.run(n);return r(i)})}function ac(e,t){let r=e.body,n=qr(r,t);return pt(n,i=>new rs(i))}function Tu(e,t){return oc(r=>{let i=Je(r,s=>ac(s,e));return t(i)})}function cc(e){let t;return e.startsWith("./")?t=ts(e):e.startsWith("/")?t=ts(e):t=Ri(e),On(t,new mn(e))}function Bu(e,t){let r=cc(e);if(r.isOk()){let n=r[0],i=gu(n),s=jt(i,l=>lc(l,t)),o=pt(s,l=>zu(new mn(e),t));return vs(o)}else{let n=r[0];return zu(n,t)}}var ie=class extends d{constructor(t,r,n,i,s){super(),this.loading=t,this.txt=r,this.data=n,this.is_playing=i,this.error_text=s}},$n=class extends d{constructor(t,r,n,i){super(),this.word=t,this.phonetic=r,this.meanings=n,this.phonetics=i}},xn=class extends d{constructor(t,r){super(),this.text=t,this.audio=r}},wn=class extends d{constructor(t,r,n){super(),this.part_of_speech=t,this.synonyms=r,this.definitions=n}},yn=class extends d{constructor(t){super(),this.def=t}},bn=class extends d{constructor(t,r,n){super(),this.title=t,this.message=r,this.resolution=n}},Pt=class extends d{constructor(t){super(),this[0]=t}},Ut=class extends d{},Wt=class extends d{constructor(t){super(),this[0]=t}},yt=class extends d{constructor(t){super(),this[0]=t}},Ft=class extends d{constructor(t){super(),this[0]=t}},Rt=class extends d{constructor(t){super(),this[0]=t}},Gt=class extends d{constructor(t){super(),this[0]=t}},kr=class extends d{};function gn(e){let t=ae("definition",te,l=>Be(new yn(l))),r=ae("synonyms",it(te),l=>ae("partOfSpeech",te,u=>ae("definitions",it(t),a=>Be(new wn(u,l,a))))),n=Fn("text","",te,l=>ae("audio",te,u=>{let a;l===""?a=new j:a=new b(l);let f=a;return Be(new xn(f,u))})),i=ae("word",te,l=>Fn("phonetic","",te,u=>ae("meanings",it(r),a=>ae("phonetics",it(n),f=>{let c;u===""?c=new j:c=new b(u);let h=c;return Be(new $n(l,h,a,f))})))),s="https://api.dictionaryapi.dev/api/v2/entries/en/"+e,o=Tu(it(i),l=>new yt(l));return Bu(s,o)}function qu(e){let t=ae("title",te,r=>ae("message",te,n=>ae("resolution",te,i=>Be(new bn(r,n,i)))));return qr(e,t)}function pc(e){return e==="input"||e==="change"||e==="focus"||e==="focusin"||e==="focusout"||e==="blur"?!0:e==="select"}function ss(e,t){return fo(e,t,T,!1,!1,pc(e),new St(0))}function vr(e){return ss("click",Be(e))}function Nu(e){return ss("keydown",ae("key",te,t=>{let n=e(t);return Be(n)}))}function Mu(e){return ss("input",Wn(p(["target","value"]),te,t=>Be(e(t))))}function _c(e){return ne(p([]),p([(()=>{if(e instanceof j)return Ge();{let t=e[0];return he(t.message)}})()]))}function mc(e){return Ar(e)===0?Ge():ne(p([M("mt-2")]),p([at(p([M("italic")]),p([he("Meaning")])),ru(p([M("list-disc")]),_e(e,r=>tu(p([M("ml-4")]),p([he(r.def)]))))]))}function hc(e){return Ar(e)===0?Ge():ne(p([M("mt-2 flex gap-2 flex-wrap")]),_(at(p([M("italic")]),p([he("Synonyms: ")])),_e(e,r=>at(p([]),p([nu(p([M("text-purple-500 cursor-pointer"),vr(new Gt(r))]),p([he(r)]))])))))}function $c(e,t,r){let n=Ds(t,i=>i.audio!=="");if(n.isOk()){let i=n[0];return ne(p([M("flex gap-4 w-full items-center justify-between")]),p([ne(p([]),p([eu(p([M("text-4xl")]),p([he(r)])),(()=>{let s=i.text;if(s instanceof j)return Ge();{let o=s[0];return at(p([M("text-purple-500")]),p([he(o)]))}})()])),ne(p([M("aspect-square size-10 flex align-center  select-none  cursor-pointer justify-center align-center border border-purple-500 bg-purple-500 rounded-4xl p-2"),e.is_playing?vr(new Ft("phonetic-audio")):vr(new Rt("phonetic-audio"))]),p([e.is_playing?at(p([M("h-auto")]),p([he("\u23F8")])):at(p([M("h-auto")]),p([he("\u23F5")])),iu(p([po("phonetic-audio"),_o(i.audio)]),p([]))]))]))}else return Ge()}function xc(e){return ne(p([M("loader")]),p([e?he("Loading.."):Ge()]))}function wc(e){return ne(p([M("flex gap-2 my-4 bg-gray-400 rounded-xl py-2 px-3")]),p([ou(p([M("w-full"),mo("Enter a word"),ho(e),Mu(t=>new Pt(t)),Nu(t=>new Wt(t))])),su(p([vr(new Ut),M("px-2 text-white-500")]),p([he("Search")]))]))}function yc(e){return ne(p([M("content")]),p([(()=>{let t=e.data;if(t instanceof j)return Ge();{let r=t[0];return ne(p([M("main")]),p([$c(e,r.phonetics,r.word),ne(p([]),p([ne(p([M("synonyms")]),_e(r.meanings,n=>ne(p([M("my-4")]),p([at(p([M("italic font-bold")]),p([he(n.part_of_speech)])),mc(n.definitions),hc(n.synonyms)]))))]))]))}})()]))}function bc(){return ne(p([M("text-4xl mt-4 text-center text-white-500")]),p([he("Dictionary App")]))}function Iu(e){return ne(p([M("w-responsive container mx-auto h-screen px-2")]),p([bc(),wc(e.txt),xc(e.loading),_c(e.error_text),yc(e)]))}var Du=(e,t)=>{let r=document.getElementById(e);if(!r){t();return}r.play(),r.addEventListener("ended",()=>{t()})},Pu=(e,t)=>{let r=document.getElementById(e);if(!r){t();return}r.pause(),r.addEventListener("pause",()=>{r.currentTime=0,t()})};function kc(e){return[new ie(!1,"",new j,!1,new j),Se()]}function vc(e,t){if(t instanceof Pt){let r=t[0],n;n=Lr(r);let s=n;return[(()=>{let o=e;return new ie(o.loading,s,o.data,o.is_playing,o.error_text)})(),Se()]}else{if(t instanceof Ut)return jn(e.txt)===0?[e,Se()]:[(()=>{let n=e;return new ie(!0,n.txt,n.data,n.is_playing,new j)})(),gn(e.txt)];if(t instanceof yt&&t[0].isOk()){let r=t[0][0],n=Is(r);if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new ie(!1,s.txt,new b(i),s.is_playing,new j)})(),Se()]}else return[(()=>{let i=e;return new ie(!1,i.txt,new j,i.is_playing,new j)})(),Se()]}else if(t instanceof yt&&!t[0].isOk()){let r=t[0][0];if(r instanceof gr){let n=r[0],i=qu(n.body);if(i.isOk()){let s=i[0];return[(()=>{let o=e;return new ie(!1,o.txt,o.data,o.is_playing,new b(s))})(),Se()]}else return[(()=>{let s=e;return new ie(!1,s.txt,s.data,s.is_playing,new j)})(),Se()]}else return[(()=>{let n=e;return new ie(!1,n.txt,n.data,n.is_playing,n.error_text)})(),Se()]}else if(t instanceof Gt){let r=t[0];return[(()=>{let n=e;return new ie(!0,r,new j,n.is_playing,new j)})(),gn(r)]}else{if(t instanceof Wt)return t[0]==="Enter"?[(()=>{let n=e;return new ie(!0,e.txt,new j,n.is_playing,new j)})(),gn(e.txt)]:[e,Se()];if(t instanceof Ft){let r=t[0],n=Et(i=>Pu(r,()=>i(new kr)));return[(()=>{let i=e;return new ie(i.loading,i.txt,i.data,!1,i.error_text)})(),n]}else if(t instanceof Rt){let r=t[0],n=Et(i=>Du(r,()=>i(new kr)));return[(()=>{let i=e;return new ie(i.loading,i.txt,i.data,!0,i.error_text)})(),n]}else return[(()=>{let r=e;return new ie(r.loading,r.txt,r.data,!1,r.error_text)})(),Se()]}}}function Uu(){let e=fu(kc,vc,Iu),t=pu(e,"#app",void 0);if(!t.isOk())throw jr("let_assert","dict_app",111,"main","Pattern match failed, no pattern matched the value.",{value:t})}Uu();
